<app-header></app-header>

<div class="container py-5">
  <h1 class="text-center mb-4 fw-bold">Confirmar compra</h1>

  @if (juego) {
  <div class="card shadow border-0">
    <div class="card-header bg-primary text-white py-3">
      <div class="d-flex justify-content-between align-items-center">
        <span class="fs-5 fw-semibold">{{ juego.titulo }}</span>
        <span class="badge text-bg-light text-dark">{{ juego.clasificacion }}</span>
      </div>
    </div>

    <div class="card-body">

      <p class="mb-3">
        <strong>ID empresa:</strong><br />
        {{ juego.idEmpresa }}
      </p>

      <p class="mb-3">
        <strong>Descripción:</strong><br />
        {{ juego.descripcion }}
      </p>

      <div class="row g-3 mb-4">
        <div class="col-md-4">
          <div class="border rounded p-3 h-100">
            <div class="text-muted small">Precio</div>
            <div class="fs-5 fw-semibold">Q {{ juego.precio }}</div>
          </div>
        </div>

        <div class="col-md-8">
          <div class="border rounded p-3 h-100">
            <div class="text-muted small">Recursos mínimos</div>
            <div class="fw-semibold">{{ juego.recursosMinimos }}</div>
          </div>
        </div>
      </div>

      <label for="fechaCompra">Fecha de Compra</label>
      <input type="date" id="fechaCompra" name="fechaCompra" class="form-control" [(ngModel)]="fechaCompra" />
      <br>

      <div class="d-flex gap-2 justify-content-end">
        <a routerLink="/tienda" class="btn btn-outline-secondary">Cancelar</a>

        <button type="button" class="btn btn-success" (click)="comprar()" [disabled]="comprado">
          @if (comprado) {
          <span class="spinner-border spinner-border-sm me-2" role="status"></span>
          Procesando...
          } @else {
          Comprar
          }
        </button>
      </div>
    </div>
  </div>
  } @else {
  <div class="text-center py-5 text-muted">
    No se encontró información del juego.
  </div>
  }

</div>